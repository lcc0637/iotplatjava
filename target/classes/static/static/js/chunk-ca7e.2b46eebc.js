(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-ca7e"],{H1iF:function(t,e,a){"use strict";var r=a("PsZf");a.n(r).a},PsZf:function(t,e,a){},SyKA:function(t,e,a){"use strict";a.r(e);var r,s=a("YEIV"),i=a.n(s),n=a("P2sY"),o=a.n(n),l=a("y2a5"),c=a("fZJM"),u=a.n(c),p={name:"useredit",mixins:[l.a],components:{},props:{paramsObj:{type:Object,default:function(){return{}}}},data:function(){return{newUserForm:{id:0,user_name:"",title:"",parent_id:0,mobile:"",pwd:""},userForm:{},deptData:[],isInDialog:!1,pObj:{}}},mounted:function(){this.pObj=o()({},this.paramsObj),this.gcomm.mapLength(this.pObj)>0?(this.isInDialog=!0,this.userForm=o()({},this.newUserForm,this.pObj)):this.userForm=o()({},this.newUserForm,this.$route.params),this.deptFetchElSelectData()},methods:(r={pObjChanged:function(){this.gcomm.mapLength(this.pObj)>0&&(this.isInDialog=!0,this.userForm=o()({},this.newUserForm,this.pObj))},deptFetchElSelectData:function(){var t=this;this.callSrvAct("/actq",{_hy:"departlist",qps:[{name:"type",val:"部门",tb:"org"}],sps:[{name:"title",tb:"org",orderV:"asc"}]}).then(function(e){t.deptData=[],"[object Array]"==Object.prototype.toString.call(e.data)?t.deptData=e.data||[]:e.data&&e.data.pageData&&"[object Array]"==Object.prototype.toString.call(e.data.pageData)&&(t.deptData=e.data.pageData||[]),t.userForm.parent_id<1&&t.deptData&&t.deptData.length>0&&(t.userForm.parent_id=t.deptData[0].id,t.userForm.parent_title=t.deptData[0].title)})},changeabc74:function(t){for(var e=null,a=0;a<this.deptData.length;a++)if(this.deptData[a].id==t){e=this.deptData[a];break}this.userForm.parent_id=e.id,this.userForm.parent_title=e.title}},i()(r,"deptFetchElSelectData",function(){var t=this;this.callSrvAct("/actq",{_hy:"departlist",qps:[{name:"type",val:"部门",tb:"org"}],sps:[{name:"title",tb:"org",orderV:"asc"}]}).then(function(e){t.deptData=[],"[object Array]"==Object.prototype.toString.call(e.data)?t.deptData=e.data||[]:e.data&&e.data.pageData&&"[object Array]"==Object.prototype.toString.call(e.data.pageData)&&(t.deptData=e.data.pageData||[]),t.userForm.parent_id<1&&t.deptData&&t.deptData.length>0&&(t.userForm.parent_id=t.deptData[0].id,t.userForm.parent_title=t.deptData[0].title)})}),i()(r,"handleSubmitUesr",function(){this.submitRoleForm("userForm")}),i()(r,"submitRoleFormImpl",function(t){var e=this;console.log(this[t]);var a=void 0,r=!0,s="";this[t].id>0?(a="/act",r=!1,s="userup"):(a="/act",s="useradd");var i=o()({},this[t]);i._hy=s,r&&(i.pwd=u.a.sha1().update(i.pwd).digest("hex")),console.log("参数",i),this.callSrvAct(a,i).then(function(t){console.log("res:",t,e.isInDialog),e.isInDialog?r?t.data&&t.data.inst?e.$emit("submitOk",t.data.inst):t.data&&e.$emit("submitOk",t.data||{}):e.$emit("submitOk",i):e.$router.go(-1)})}),i()(r,"submitRoleForm",function(t){var e=this;this.$refs[t].validate(function(a){if(!a)return!1;e.submitRoleFormImpl(t)})}),r),watch:{paramsObj:function(t){this.pObj.id!=this.paramsObj.id&&(this.pObj=o()({},this.paramsObj),this.pObjChanged())}},computed:{},beforeCreate:function(){},created:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){}},h=(a("H1iF"),a("KHd+")),d=Object(h.a)(p,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",{attrs:{direction:"vertical"}},[a("el-form",{ref:"userForm",staticStyle:{"margin-top":"10px"},attrs:{model:t.userForm,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"账号",prop:"user_name",rules:{max:64}}},[a("el-input",{model:{value:t.userForm.user_name,callback:function(e){t.$set(t.userForm,"user_name",e)},expression:"userForm.user_name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"姓名",prop:"title",rules:{max:64}}},[a("el-input",{model:{value:t.userForm.title,callback:function(e){t.$set(t.userForm,"title",e)},expression:"userForm.title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"部门ID",prop:"parent_id"}},[a("el-select",{ref:"dept",on:{change:t.changeabc74},model:{value:t.userForm.parent_id,callback:function(e){t.$set(t.userForm,"parent_id",e)},expression:"userForm.parent_id"}},t._l(t.deptData,function(t){return a("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"手机号",prop:"mobile",rules:{max:64}}},[a("el-input",{model:{value:t.userForm.mobile,callback:function(e){t.$set(t.userForm,"mobile",e)},expression:"userForm.mobile"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"pwd",rules:{max:64}}},[a("el-input",{model:{value:t.userForm.pwd,callback:function(e){t.$set(t.userForm,"pwd",e)},expression:"userForm.pwd"}})],1)],1),t._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{on:{click:t.handleSubmitUesr}},[a("span",[t._v("提交\n            ")])])],1)],1)},[],!1,null,"9f1a9b92",null);d.options.__file="index.vue";e.default=d.exports},y2a5:function(t,e,a){"use strict";var r=a("gDS+"),s=a.n(r),i=a("4d7F"),n=a.n(i);e.a={methods:{cb_null:function(t){return!1},cb_goBack:function(t){return this.$router.go(-1),!0},cb_success:function(t){return!(!t.status||"SUCCESS"!=t.status)||(this.$message.error(t.msg),!1)},cb_showMess:function(t){return this.$message.success(t.msg),!0},gen_sameValue:function(t,e){return function(a,r,s){r!=t?s(new Error(e)):s()}},refreshCaptcha:function(t){t.preventDefault(),t.target.src=this.hysrvport+"/captcha?"+Math.random()},add_authToken:function(t){return t.length<1?"":t=t.indexOf("?")>-1?t+"&Authorization="+this.apiSrv.token:t+"?Authorization="+this.apiSrv.token},callServer:function(t,e,a){var r=this;this.apiSrv.callServer(t,e).then(function(t){if(console.log("res ------",t),a)for(var e=0;e<a.length;e++){if(a[e])if(!a[e](t))break}}).catch(function(t){console.log("err:",t),r.$message.error(t)})},callSrvAct:function(t,e){var a=this;return new n.a(function(r,s){a.apiSrv.callServer(t,e).then(function(t){t.status&&"SUCCESS"==t.status?r(t):(console.log("res:",t),a.$message.error(t.msg))}).catch(function(t){console.log("err:",t),a.$message.error(t)})})},gen_list_cb:function(t,e){var a=this;if(!t||t.length<1)return this.cb_null;var r=t+"Data",s=t+"TotalRec",i=t+"TotalPage",n=t+"RecOfPage",o=t+"CurPage";return function(t){return e&&1==e&&t.data.cp>1?a[r]=a[r].concat(t.data.pageData||[]):a[r]=t.data.pageData||[],a[s]=t.data.totalRec,a[n]=t.data.rop,a[o]=t.data.cp,a[i]=t.data.rop>0?Math.ceil(t.data.totalRec/t.data.rop):0,t.data.detailData&&(a[r+"dData"]=t.data.detailData||[]),!0}},gen_selmulti_change:function(t){var e=this;if(!t||t.length<1)return this.cb_null;var a=t+"MultiSel";return function(t){if(e[a]){for(var r=[],s=0;s<t.length;s++)r.push(t[s].id);e[a]=r}}},refreshPage2:function(t,e,a,r,i,n){var o=t+"QueryArr",l=t+"CbPage",c=JSON.parse(s()(this[o]));if(c&&c.length>0)for(var u=c.length-1;u>-1;u--)console.log("qpsArr[i].val",c[u].val,0==c[u].val,""!=c[u].val),0==c[u].val&&(console.log("i:",u),c.splice(u,1));console.log("qpsArr:",c,this[o]);var p={qps:c||"",rop:a,cp:r};return this[t+"SortParas"]&&(p.sps=this[t+"SortParas"]),p._hy=i,this.callServer(e,p,[this.cb_success,this[l],n])},refreshPage:function(t,e,a,r){var s=t+"RecOfPage",i=t+"CurPage";this[i]<1&&(this[i]=1),this.refreshPage2(t,e,this[s],this[i],a,r)},queryPageData:function(t,e,a,r,i,n){if(!t||t.length<1)return this.cb_null;var o=t+"QueryArr",l=JSON.parse(s()(this[o]));if(l&&l.length>0)for(var c=l.length-1;c>-1;c--)0==l[c].val&&l.splice(c,1);console.log("qpsArr:",l);var u={qps:l||[],rop:a,cp:r};return this[t+"SortParas"]&&(u.sps=this[t+"SortParas"]),u._hy=i,this.callServer(e,u,n)}}}}}]);