(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2d2d","chunk-63ca","chunk-7bae"],{BvPp:function(t,a,e){},FQyy:function(t,a,e){"use strict";e.r(a);var n=e("EJiy"),o=e.n(n),l=e("P2sY"),i=e.n(l),r=e("gDS+"),s=e.n(r),c=e("YEIV"),u=e.n(c),f=e("Q3ra"),d=e("Y6Yy"),h={name:"datowtate",mixins:[e("y2a5").a],components:u()({Nlate:f.default,Dataflowimport:d.default},"Nlate",f.default),props:{},data:function(){return{dataflowData:[],dataflowTotalRec:0,dataflowTotalPage:0,dataflowRecOfPage:10,dataflowCurPage:1,dataflowCbPage:this.gen_list_cb("dataflow"),dataflowQueryArr:[{name:"datatitle",val:"",op:"like",tb:"dataflow"}],dataflowQueryInit:[{name:"datatitle",val:"",op:"like",tb:"dataflow"}],dataflowMultiSel:[],show:!1,nlateEdit:null,showimport:!1,importEdit:null,tableHeight:window.innerHeight-500}},mounted:function(){this.refreshPage("dataflow","/actq","dataflowlist")},methods:{dataflowMultiSelChange:function(t){this.dataflowMultiSel=t},dataflowQuery:function(){this.refreshPage2("dataflow","/actq",this.remoteRecOfPage,1,"dataflowlist")},dataflowResetQuery:function(){this.dataflowQueryArr=JSON.parse(s()(this.dataflowQueryInit))},dataflowSizeChange:function(t){this.refreshPage2("dataflow","/actq",t,this.dataflowCurPage,"dataflowlist")},dataflowCurChange:function(t){this.refreshPage2("dataflow","/actq",this.dataflowRecOfPage,t,"dataflowlist")},search:function(){this.refreshPage("dataflow","/actq","dataflowlist")},handledataflowEdit:function(t,a){this.nlateEdit=i()({},a),this.show=!0,this.nlateSet=!0},importing:function(){this.$router.push({name:"dataflowimport"})},importOk:function(){},importClose:function(){},exporting:function(){for(var t=[],a=0;a<this.dataflowData.length;a++)t.push({"数据流值":this.dataflowData[a].dataval,"数据流名称":this.dataflowData[a].datatitle,"单位":this.dataflowData[a].company,"单位符号":this.dataflowData[a].comsym,"关联设备数":this.dataflowData[a].equman});var e=XLSX.utils.json_to_sheet(t);console.log(e),this.openDownloadDialog(this.sheet2blob(e),"下载1.xlsx")},sheet2blob:function(t,a){var e={SheetNames:[a=a||"sheet1"],Sheets:{}};e.Sheets[a]=t;var n=XLSX.write(e,{bookType:"xlsx",bookSST:!1,type:"binary"});return new Blob([function(t){for(var a=new ArrayBuffer(t.length),e=new Uint8Array(a),n=0;n!=t.length;++n)e[n]=255&t.charCodeAt(n);return a}(n)],{type:"application/octet-stream"})},openDownloadDialog:function(t,a){"object"==(void 0===t?"undefined":o()(t))&&t instanceof Blob&&(t=URL.createObjectURL(t));var e,n=document.createElement("a");n.href=t,n.download=a||"",window.MouseEvent?e=new MouseEvent("click"):(e=document.createEvent("MouseEvents")).initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(e)},add:function(){this.show=!0,this.nlateEdit={id:0},console.log("数据哈哈哈",this.nlatEdit)},handleChange:function(t){console.log("hahaha",t);for(var a=[],e=0;e<t.length;e++)a.push(t[e].id);this.dataflowMultiSel=a,this.dataArr=t,console.log("qqq",t)},handledataflowDel:function(t,a){var e=this,n=a;this.$confirm("此操作将删除该项数, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t={_hy:"dataflowdel",dataflow:[{name:"id",val:[n.id],op:"in"}]};console.log("upData:",t),e.callSrvAct("/act",t).then(function(t){e.refreshPage("dataflow","/actq","dataflowlist")})}).catch(function(t){e.$message.error(t)})},show3:function(){var t=this;console.log("多选ID",this.dataflowMultiSel);var a=this;this.$confirm("此操作将删除该项数, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={_hy:"dataflowdel",dataflow:[{name:"id",val:a.dataflowMultiSel,op:"in"}]};console.log("upData:",e),t.callSrvAct("/act",e).then(function(a){t.refreshPage("dataflow","/actq","dataflowlist")})}).catch(function(a){t.$message.error(a)})},nlateOK:function(){this.show=!1,this.refreshPage("dataflow","/actq","dataflowlist")},nlateSet:function(){this.show=!1}},watch:{},computed:{},beforeCreate:function(){},created:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){}},p=(e("yjMv"),e("KHd+")),v=Object(p.a)(h,function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("el-container",{staticStyle:{height:"100%"},attrs:{direction:"vertical"}},[e("div",[e("span",[t._v("名称\n        ")]),t._v(" "),e("el-input",{staticStyle:{width:"200px"},model:{value:t.dataflowQueryArr[0].val,callback:function(a){t.$set(t.dataflowQueryArr[0],"val",a)},expression:"dataflowQueryArr[0].val"}}),t._v(" "),e("el-button",{on:{click:t.search}},[e("span",[t._v("搜索\n            ")])])],1),t._v(" "),e("div",{staticStyle:{margin:"10px 0px"}},[e("el-button",{on:{click:t.add}},[e("span",[t._v("新增\n            ")])]),t._v(" "),e("el-button",{on:{click:t.show3}},[e("span",[t._v("批量删除\n            ")])]),t._v(" "),e("el-button",{on:{click:t.exporting}},[e("span",[t._v("批量导出\n            ")])]),t._v(" "),e("el-button",{on:{click:t.importing}},[e("span",[t._v("批量导入\n            ")])])],1),t._v(" "),e("el-table",{ref:"dataflow",attrs:{stripe:!0,border:!0,height:t.tableHeight,"header-cell-style":{background:"#E6F4FF",fontWeight:"500",color:"#0A51C4",borderBottom:"2px solid #4093F7"},data:t.dataflowData},on:{"selection-change":t.handleChange}},[e("el-table-column",{attrs:{type:"selection"}}),t._v(" "),e("el-table-column",{attrs:{label:"数据流值",prop:"dataval",align:"center"}}),t._v(" "),e("el-table-column",{attrs:{label:"数据流名称",prop:"datatitle",align:"center"}}),t._v(" "),e("el-table-column",{attrs:{label:"单位",prop:"company",align:"center"}}),t._v(" "),e("el-table-column",{attrs:{label:"单位符号",prop:"comsym",align:"center"}}),t._v(" "),e("el-table-column",{attrs:{label:"关联设备数",prop:"equman",align:"center"}}),t._v(" "),e("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticStyle:{"margin-top":"10px"}},[e("el-button",{on:{click:function(e){t.handledataflowEdit(a.$index,a.row)}}},[e("span",[t._v("编辑\n                        ")])]),t._v(" "),e("el-button",{attrs:{type:"danger"},on:{click:function(e){t.handledataflowDel(a.$index,a.row)}}},[e("span",[t._v("删除\n                        ")])])],1)]}}])})],1),t._v(" "),e("el-pagination",{staticStyle:{"text-align":"center"},attrs:{total:t.dataflowTotalRec,"page-count":t.dataflowTotalPage,layout:"total, sizes, prev, pager, next"},on:{"size-change":t.dataflowSizeChange,"current-change":t.dataflowCurChange}}),t._v(" "),t.show?e("el-dialog",{attrs:{visible:t.show,title:"新增数据流模板"},on:{"update:visible":function(a){t.show=a}}},[e("nlate",{attrs:{paramsObj:t.nlateEdit},on:{submitOk:t.nlateOK,submitClose:t.nlateSet}})],1):t._e(),t._v(" "),e("el-dialog",{attrs:{visible:t.showimport,title:"导入"},on:{"update:visible":function(a){t.showimport=a}}},[e("dataflowimport",{attrs:{paramsObj:t.importEdit},on:{submitOk:t.importOk,submitClose:t.importClose}})],1)],1)},[],!1,null,"ac9faf28",null);v.options.__file="index.vue";a.default=v.exports},"K7+j":function(t,a,e){"use strict";var n=e("okoG");e.n(n).a},Q3ra:function(t,a,e){"use strict";e.r(a);var n=e("P2sY"),o=e.n(n),l={name:"nlate",mixins:[e("y2a5").a],components:{},props:{paramsObj:{type:Object,default:function(){return{}}}},data:function(){return{newDataflowForm:{id:0,dataval:"",datatitle:"",company:"",comsym:""},dataflowForm:{}}},mounted:function(){this.pObj=o()({},this.paramsObj),this.gcomm.mapLength(this.pObj)>0?(this.isInDialog=!0,this.dataflowForm=o()({},this.newDataflowForm,this.pObj)):this.dataflowForm=o()({},this.newDataflowForm,this.$route.params)},methods:{pObjChanged:function(){this.gcomm.mapLength(this.pObj)>0&&(this.isInDialog=!0,this.dataflowForm=o()({},this.newDataflowForm,this.pObj))},handleClick12:function(){this.submitOrgForm("dataflowForm")},submitOrgForm:function(t){var a=this;this.$refs[t].validate(function(e){if(!e)return!1;a.submitOrgFormImpl(t)})},submitOrgFormImpl:function(t){var a=this,e=void 0,n=!0,l="";this[t].id>0?(e="/act",n=!1,l="dataflowup"):(e="/act",l="dataflowadd",this[t].state="关闭");var i=o()({},this[t]);i._hy=l,this.callSrvAct(e,i).then(function(t){a.isInDialog?n?t.data&&t.data.inst?(console.log("1111111111"),a.$emit("submitOk",t.data.inst)):t.data&&(console.log("22222222222"),a.$emit("submitOk",t.data||{})):a.$emit("submitOk",i):a.$router.go(-1)})},goClick:function(){this.$emit("submitClose")}},watch:{paramsObj:function(t){this.pObj.id!=this.paramsObj.id&&(this.pObj=o()({},this.paramsObj),this.pObjChanged())}},computed:{},beforeCreate:function(){},created:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){}},i=(e("U4Ip"),e("KHd+")),r=Object(i.a)(l,function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("el-container",{attrs:{direction:"vertical"}},[e("el-form",{ref:"dataflowForm",attrs:{model:t.dataflowForm,"label-width":"120px"}},[e("el-form-item",{attrs:{label:"数据流值：",prop:"dataval"}},[e("el-input",{model:{value:t.dataflowForm.dataval,callback:function(a){t.$set(t.dataflowForm,"dataval",a)},expression:"dataflowForm.dataval"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"数据流名称：",prop:"datatitle"}},[e("el-input",{model:{value:t.dataflowForm.datatitle,callback:function(a){t.$set(t.dataflowForm,"datatitle",a)},expression:"dataflowForm.datatitle"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"单位名称：",prop:"company"}},[e("el-input",{model:{value:t.dataflowForm.company,callback:function(a){t.$set(t.dataflowForm,"company",a)},expression:"dataflowForm.company"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"单位符号：",prop:"comsym"}},[e("el-input",{model:{value:t.dataflowForm.comsym,callback:function(a){t.$set(t.dataflowForm,"comsym",a)},expression:"dataflowForm.comsym"}})],1)],1),t._v(" "),e("div",{staticStyle:{"text-align":"center"}},[e("el-button",{staticStyle:{"background-color":"#317EF3"},on:{click:t.handleClick12}},[e("span",{staticStyle:{color:"#ffffff"}},[t._v("提交\n            ")])]),t._v(" "),e("el-button",{on:{click:t.goClick}},[e("span",[t._v("取消\n            ")])])],1)],1)},[],!1,null,"055aa7b2",null);r.options.__file="index.vue";a.default=r.exports},"RU/L":function(t,a,e){e("Rqdy");var n=e("WEpk").Object;t.exports=function(t,a,e){return n.defineProperty(t,a,e)}},Rqdy:function(t,a,e){var n=e("Y7ZC");n(n.S+n.F*!e("jmDH"),"Object",{defineProperty:e("2faE").f})},SEkw:function(t,a,e){t.exports={default:e("RU/L"),__esModule:!0}},U4Ip:function(t,a,e){"use strict";var n=e("i4KB");e.n(n).a},Y6Yy:function(t,a,e){"use strict";e.r(a);var n=e("P2sY"),o=e.n(n),l=e("EJiy"),i=e.n(l),r={name:"dataflowimport",mixins:[e("y2a5").a],components:{},props:{},data:function(){return{importData:[],num:0,success:0,fail:0,repeat:0}},mounted:function(){},methods:{importfxx:function(t){var a=this;a.num=0,a.success=0,a.fail=0,a.repeat=0,console.log(this.$refs.upload.value),this.file=event.currentTarget.files[0],console.log(this.file);var e=this.file,n=new FileReader;FileReader.prototype.readAsBinaryString=function(t){var e,n,o="";window.console.log(this);var l=new FileReader;l.onload=function(t){window.console.log(t);for(var i=new Uint8Array(l.result),r=i.byteLength,s=0;s<r;s++)o+=String.fromCharCode(i[s]);e=XLSX.read(o,{type:"binary"}),n=XLSX.utils.sheet_to_json(e.Sheets[e.SheetNames[0]]),window.console.log("呵呵呵",n),console.log("哈哈哈",n);for(var c=[],u=0;u<n.length;u++)c.push({dataval:n[u].数据流值,datatitle:n[u].数据流名称,company:n[u].单位,comsym:n[u].单位符号,equman:n[u].关联设备数});window.console.log(c),a.importData=c,console.log(a.$refs.upload.value),console.log(document.getElementById("upload").value)},l.readAsArrayBuffer(t)},n.readAsBinaryString(e)},fixdata:function(t){for(var a="",e=0,n=10240;e<t.byteLength/n;++e)a+=String.fromCharCode.apply(null,new Uint8Array(t.slice(e*n,e*n+n)));return a+=String.fromCharCode.apply(null,new Uint8Array(t.slice(e*n)))},SizeChange:function(){},CurChange:function(){},exportExcel:function(){this.num=0,this.success=0,this.fail=0,this.repeat=0;var t=XLSX.utils.json_to_sheet([{"数据流值":"","数据流名称":"","单位":"","单位符号":"","关联设备数":""}]);console.log(t),this.openDownloadDialog(this.sheet2blob(t),"模板教程.xlsx")},sheet2blob:function(t,a){var e={SheetNames:[a=a||"sheet1"],Sheets:{}};e.Sheets[a]=t;var n=XLSX.write(e,{bookType:"xlsx",bookSST:!1,type:"binary"});return new Blob([function(t){for(var a=new ArrayBuffer(t.length),e=new Uint8Array(a),n=0;n!=t.length;++n)e[n]=255&t.charCodeAt(n);return a}(n)],{type:"application/octet-stream"})},openDownloadDialog:function(t,a){"object"==(void 0===t?"undefined":i()(t))&&t instanceof Blob&&(t=URL.createObjectURL(t));var e,n=document.createElement("a");n.href=t,n.download=a||"",window.MouseEvent?e=new MouseEvent("click"):(e=document.createEvent("MouseEvents")).initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(e)},uploadOk:function(){var t=this;this.num=0,this.success=0,this.fail=0,this.repeat=0,this.num=this.importData.length,console.log("上传数据",this.importData);for(var a=0;a<this.importData.length;a++){var e=o()({},this.importData[a]);console.log("数据",this.importData),e._hy="dataflowadd",this.callSrvAct("/act",e).then(function(a){console.log("后台返回",a),"SUCCESS"==a.status?t.success=t.success+1:"FAILED"==a.status&&(t.fail=t.fail+1)})}}},watch:{},computed:{},beforeCreate:function(){},created:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){}},s=(e("K7+j"),e("KHd+")),c=Object(s.a)(r,function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("el-container",{attrs:{direction:"vertical"}},[e("div",[e("el-row",{attrs:{autogenchild:!1,childcol:24}},[e("span",[t._v("提示：需保证上传的excel文件为单一文件\n            ")])]),t._v(" "),e("div",{staticStyle:{margin:"10px 0px"}},[e("span",[t._v("请先\n            ")]),t._v(" "),e("el-button",{on:{click:t.exportExcel}},[e("span",[t._v("下载模板和教程\n                ")])]),t._v(" "),e("span",[t._v("仔细阅读后，按要求填写车辆信息，并上传摄像机信息表格\n            ")])],1),t._v(" "),e("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[e("div",{staticStyle:{display:"flex",height:"36px","line-height":"35px"}},[e("span",[t._v("上传的文件：\n                ")]),t._v(" "),e("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"文件路径"}}),t._v(" "),e("el-input",{ref:"upload",attrs:{type:"file",id:"upload"},on:{change:function(a){t.importfxx(this)}}}),t._v(" "),e("el-button",{on:{click:t.uploadOk}},[e("span",[t._v("确认上传\n                    ")])])],1),t._v(" "),e("div",[e("span",[t._v("上传共\n                ")]),t._v(" "),e("span",[t._v(t._s(t.num)+"\n                ")]),t._v(" "),e("span",[t._v("条  成功\n                ")]),t._v(" "),e("span",{staticStyle:{color:"green"}},[t._v(t._s(t.success)+"\n                ")]),t._v(" "),e("span",{staticStyle:{color:"green"}},[t._v("条\n                ")]),t._v(" "),e("span",[t._v("失败\n                ")]),t._v(" "),e("span",{staticStyle:{color:"red"}},[t._v(t._s(t.fail)+"\n                ")]),t._v(" "),e("span",{staticStyle:{color:"red"}},[t._v("条\n                ")]),t._v(" "),e("span",[t._v("重复\n                ")]),t._v(" "),e("span",{staticStyle:{color:"blue"}},[t._v(t._s(t.repeat)+"\n                ")]),t._v(" "),e("span",{staticStyle:{color:"blue"}},[t._v("条\n                ")])])]),t._v(" "),e("el-table",{attrs:{data:t.importData,"header-cell-style":{background:"rgba(241,246,254,1)",fontWeight:"500",color:"#333333",fontSize:"16px","text-align":"center"}}},[e("el-table-column",{attrs:{label:"数据流值",prop:"dataval"}}),t._v(" "),e("el-table-column",{attrs:{label:"数据流名称",prop:"datatitle"}}),t._v(" "),e("el-table-column",{attrs:{label:"单位",prop:"company"}}),t._v(" "),e("el-table-column",{attrs:{label:"单位符号",prop:"comsym"}}),t._v(" "),e("el-table-column",{attrs:{label:"关联设备数",prop:"equman"}})],1)],1)])},[],!1,null,"36908d54",null);c.options.__file="index.vue";a.default=c.exports},YEIV:function(t,a,e){"use strict";a.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(e("SEkw"));a.default=function(t,a,e){return a in t?(0,n.default)(t,a,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[a]=e,t}},i4KB:function(t,a,e){},okoG:function(t,a,e){},y2a5:function(t,a,e){"use strict";var n=e("gDS+"),o=e.n(n),l=e("4d7F"),i=e.n(l);a.a={methods:{cb_null:function(t){return!1},cb_goBack:function(t){return this.$router.go(-1),!0},cb_success:function(t){return!(!t.status||"SUCCESS"!=t.status)||(this.$message.error(t.msg),!1)},cb_showMess:function(t){return this.$message.success(t.msg),!0},gen_sameValue:function(t,a){return function(e,n,o){n!=t?o(new Error(a)):o()}},refreshCaptcha:function(t){t.preventDefault(),t.target.src=this.hysrvport+"/captcha?"+Math.random()},add_authToken:function(t){return t.length<1?"":t=t.indexOf("?")>-1?t+"&Authorization="+this.apiSrv.token:t+"?Authorization="+this.apiSrv.token},callServer:function(t,a,e){var n=this;this.apiSrv.callServer(t,a).then(function(t){if(console.log("res ------",t),e)for(var a=0;a<e.length;a++){if(e[a])if(!e[a](t))break}}).catch(function(t){console.log("err:",t),n.$message.error(t)})},callSrvAct:function(t,a){var e=this;return new i.a(function(n,o){e.apiSrv.callServer(t,a).then(function(t){t.status&&"SUCCESS"==t.status?n(t):(console.log("res:",t),e.$message.error(t.msg))}).catch(function(t){console.log("err:",t),e.$message.error(t)})})},gen_list_cb:function(t,a){var e=this;if(!t||t.length<1)return this.cb_null;var n=t+"Data",o=t+"TotalRec",l=t+"TotalPage",i=t+"RecOfPage",r=t+"CurPage";return function(t){return a&&1==a&&t.data.cp>1?e[n]=e[n].concat(t.data.pageData||[]):e[n]=t.data.pageData||[],e[o]=t.data.totalRec,e[i]=t.data.rop,e[r]=t.data.cp,e[l]=t.data.rop>0?Math.ceil(t.data.totalRec/t.data.rop):0,t.data.detailData&&(e[n+"dData"]=t.data.detailData||[]),!0}},gen_selmulti_change:function(t){var a=this;if(!t||t.length<1)return this.cb_null;var e=t+"MultiSel";return function(t){if(a[e]){for(var n=[],o=0;o<t.length;o++)n.push(t[o].id);a[e]=n}}},refreshPage2:function(t,a,e,n,l,i){var r=t+"QueryArr",s=t+"CbPage",c=JSON.parse(o()(this[r]));if(c&&c.length>0)for(var u=c.length-1;u>-1;u--)console.log("qpsArr[i].val",c[u].val,0==c[u].val,""!=c[u].val),0==c[u].val&&(console.log("i:",u),c.splice(u,1));console.log("qpsArr:",c,this[r]);var f={qps:c||"",rop:e,cp:n};return this[t+"SortParas"]&&(f.sps=this[t+"SortParas"]),f._hy=l,this.callServer(a,f,[this.cb_success,this[s],i])},refreshPage:function(t,a,e,n){var o=t+"RecOfPage",l=t+"CurPage";this[l]<1&&(this[l]=1),this.refreshPage2(t,a,this[o],this[l],e,n)},queryPageData:function(t,a,e,n,l,i){if(!t||t.length<1)return this.cb_null;var r=t+"QueryArr",s=JSON.parse(o()(this[r]));if(s&&s.length>0)for(var c=s.length-1;c>-1;c--)0==s[c].val&&s.splice(c,1);console.log("qpsArr:",s);var u={qps:s||[],rop:e,cp:n};return this[t+"SortParas"]&&(u.sps=this[t+"SortParas"]),u._hy=l,this.callServer(a,u,i)}}}},yjMv:function(t,a,e){"use strict";var n=e("BvPp");e.n(n).a}}]);