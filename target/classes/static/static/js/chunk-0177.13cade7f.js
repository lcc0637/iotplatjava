(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0177","chunk-6913"],{EpHr:function(e,t,o){},Jzi3:function(e,t,o){"use strict";var n=o("NA52");o.n(n).a},NA52:function(e,t,o){},XaZM:function(e,t,o){"use strict";o.r(t);var n=o("P2sY"),r=o.n(n),a={name:"roleedit",mixins:[o("y2a5").a],components:{},props:{paramsObj:{type:Object,default:function(){return{}}}},data:function(){return{newRoleForm:{id:0,title:"",memo:"",is_edit:"",enable:"",addtime:(new Date).getTime(),sort:0,version:0},roleForm:{},isInDialog:!1,pObj:{}}},mounted:function(){this.pObj=r()({},this.paramsObj),this.gcomm.mapLength(this.pObj)>0?(this.isInDialog=!0,this.roleForm=r()({},this.newRoleForm,this.pObj)):this.roleForm=r()({},this.newRoleForm,this.$route.params)},methods:{pObjChanged:function(){this.gcomm.mapLength(this.pObj)>0&&(this.isInDialog=!0,this.roleForm=r()({},this.newRoleForm,this.pObj))},handleSubmitRole:function(){this.submitRoleForm("roleForm")},submitRoleFormImpl:function(e){var t=this,o=void 0,n=!0,a="";this[e].id>0?(o="/act",n=!1,a="roleup"):(o="/act",a="roleadd");var i=r()({},this[e]);i._hy=a,this.callSrvAct(o,i).then(function(e){console.log("res:",e,t.isInDialog),t.isInDialog?n?e.data&&e.data.inst?t.$emit("submitOk",e.data.inst):e.data&&t.$emit("submitOk",e.data||{}):t.$emit("submitOk",i):t.$router.go(-1)})},submitRoleForm:function(e){var t=this;this.$refs[e].validate(function(o){if(!o)return!1;t.submitRoleFormImpl(e)})}},watch:{paramsObj:function(e){this.pObj.id!=this.paramsObj.id&&(this.pObj=r()({},this.paramsObj),this.pObjChanged())}},computed:{},beforeCreate:function(){},created:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){}},i=(o("Jzi3"),o("KHd+")),l=Object(i.a)(a,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-container",{attrs:{direction:"vertical"}},[o("el-form",{ref:"roleForm",attrs:{model:e.roleForm,"label-width":"120px"}},[o("el-form-item",{attrs:{label:"角色名称",prop:"title",rules:{max:60}}},[o("el-input",{model:{value:e.roleForm.title,callback:function(t){e.$set(e.roleForm,"title",t)},expression:"roleForm.title"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"角色描述",prop:"memo",rules:{max:200}}},[o("el-input",{model:{value:e.roleForm.memo,callback:function(t){e.$set(e.roleForm,"memo",t)},expression:"roleForm.memo"}})],1),e._v(" "),e._e(),e._v(" "),e._e(),e._v(" "),e._e(),e._v(" "),e._e(),e._v(" "),e._e()],1),e._v(" "),o("div",{staticStyle:{"text-align":"center"}},[o("el-button",{on:{click:e.handleSubmitRole}},[o("span",[e._v("提交\n            ")])])],1)],1)},[],!1,null,"472bc705",null);l.options.__file="index.vue";t.default=l.exports},kMdH:function(e,t,o){"use strict";o.r(t);var n=o("P2sY"),r=o.n(n),a=o("gDS+"),i=o.n(a),l=o("XaZM"),s={name:"rolelist",mixins:[o("y2a5").a],components:{Roleedit:l.default},props:{},data:function(){return{roleData:[],roleTotalRec:0,roleTotalPage:0,roleRecOfPage:10,roleCurPage:1,roleCbPage:this.gen_list_cb("role"),roleQueryArr:[{name:"title",val:"",op:"like",tb:"role"}],roleQueryInit:[{name:"title",val:"",op:"like",tb:"role"}],roleMultiSel:[],roleSortParas:[{name:"title",tb:"role",orderV:"asc"}],roleEditShow:!1,roleEditInst:null,tableHeight:window.innerHeight-500}},mounted:function(){this.refreshPage("role","/actq","rolelist")},methods:{roleMultiSelChange:function(e){this.roleMultiSel=e},roleQuery:function(){this.refreshPage2("role","/actq",this.remoteRecOfPage,1,"rolelist")},roleResetQuery:function(){this.roleQueryArr=JSON.parse(i()(this.roleQueryInit))},roleSizeChange:function(e){this.refreshPage2("role","/actq",e,this.roleCurPage,"rolelist")},roleCurChange:function(e){this.refreshPage2("role","/actq",this.roleRecOfPage,e,"rolelist")},add:function(){this.roleEdit={id:0,title:"",mome:"",is_edit:"t"},this.roleEditShow=!0},handleRoleEdit:function(e,t){this.roleEdit=r()({},t),this.roleEditShow=!0},handleRoleDel:function(e,t){var o=this,n=t;this.$confirm("此操作将删除该项数, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={_hy:"roledel",qps:[{name:"id",val:[n.id],op:"in"}]};console.log("upData:",e),o.callSrvAct("/act",e).then(function(e){o.refreshPage("role","/actq","rolelist")})}).catch(function(e){o.$message.error(e)})},handleRoleDels:function(){var e=this;console.log("多选ID",this.roleMultiSel);var t=this;this.$confirm("此操作将删除该项数, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var o={_hy:"roledel",qps:[{name:"id",val:t.roleMultiSel,op:"in"}]};console.log("upData:",o),e.callSrvAct("/act",o).then(function(t){e.refreshPage("role","/actq","rolelist")})}).catch(function(t){e.$message.error(t)})},jurisdiction:function(e,t){this.$router.push({name:"rolepage",params:null})},handleChange:function(e){for(var t=[],o=0;o<e.length;o++)t.push(e[o].id);this.roleMultiSel=t},roleEditOK:function(){this.refreshPage("role","/actq","rolelist"),this.roleEdit={},this.roleEditShow=!1},roleEditClose:function(){this.roleEditShow=!1},roleEnableSet:function(e){var t=this;console.log("row:",e);var o=r()({},{id:e.id,enable:e.enable,version:e.version});o._hy="roleup",console.log("params:",o),this.callSrvAct("/act",o).then(function(e){t.refreshPage("role","/actq","rolelist")})}},watch:{},computed:{},beforeCreate:function(){},created:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){}},c=(o("m1hL"),o("KHd+")),u=Object(c.a)(s,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-container",{staticStyle:{height:"100%"},attrs:{direction:"vertical"}},[o("div",[o("span",[e._v("角色名称\n        ")]),e._v(" "),o("el-input",{staticStyle:{width:"220px","margin-left":"10px"}}),e._v(" "),o("el-button",{staticStyle:{"margin-left":"30px"}},[o("span",[e._v("搜索\n            ")])]),e._v(" "),o("el-button",{staticStyle:{"margin-left":"30px"},on:{click:e.add}},[o("span",[e._v("新增\n            ")])]),e._v(" "),o("el-button",{staticStyle:{"margin-left":"30px"},on:{click:e.handleRoleDels}},[o("span",[e._v("批量删除\n            ")])])],1),e._v(" "),o("el-table",{ref:"role",staticStyle:{margin:"10px 0px"},attrs:{stripe:!0,border:!0,height:e.tableHeight,"header-cell-style":{background:"#E6F4FF",fontWeight:"500",color:"#0A51C4",borderBottom:"2px solid #4093F7"},data:e.roleData},on:{"selection-change":e.handleChange}},[o("el-table-column",{attrs:{type:"selection"}}),e._v(" "),o("el-table-column",{attrs:{label:"角色名称",prop:"title",align:"center"}}),e._v(" "),o("el-table-column",{attrs:{label:"描述",prop:"memo",align:"center"}}),e._v(" "),o("el-table-column",{attrs:{label:"添加时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(e.gcomm.v2datetimestr(t.row.addtime))+"\n                ")])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"是否启用",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-radio-group",{on:{change:function(o){e.roleEnableSet(t.row)}},model:{value:t.row.enable,callback:function(o){e.$set(t.row,"enable",o)},expression:"scope.row.enable"}},[o("el-radio",{attrs:{label:"t"}},[o("span",[e._v("是\n                        ")])]),e._v(" "),o("el-radio",{attrs:{label:"f"}},[o("span",[e._v("否\n                        ")])])],1)]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"操作","min-width":"100%",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{on:{click:function(o){e.handleRoleEdit(t.$index,t.row)}}},[o("span",[e._v("修改\n                    ")])]),e._v(" "),o("el-button",{on:{click:function(o){e.jurisdiction(t.$index,t.row)}}},[o("span",[e._v("查看权限\n                    ")])]),e._v(" "),o("el-button",{attrs:{type:"danger"},on:{click:function(o){e.handleRoleDel(t.$index,t.row)}}},[o("span",[e._v("删除\n                    ")])])]}}])})],1),e._v(" "),o("div",{staticStyle:{"text-align":"center"}},[o("el-pagination",{attrs:{total:e.roleTotalRec,"page-count":e.roleTotalPage,layout:"total, sizes, prev, pager, next"},on:{"size-change":e.roleSizeChange,"current-change":e.roleCurChange}})],1),e._v(" "),o("el-dialog",{attrs:{visible:e.roleEditShow,title:"角色编辑"},on:{"update:visible":function(t){e.roleEditShow=t}}},[o("roleedit",{attrs:{paramsObj:e.roleEditInst},on:{submitOk:e.roleEditOK,submitClose:e.roleEditClose}})],1)],1)},[],!1,null,"2e3d7ead",null);u.options.__file="index.vue";t.default=u.exports},m1hL:function(e,t,o){"use strict";var n=o("EpHr");o.n(n).a},y2a5:function(e,t,o){"use strict";var n=o("gDS+"),r=o.n(n),a=o("4d7F"),i=o.n(a);t.a={methods:{cb_null:function(e){return!1},cb_goBack:function(e){return this.$router.go(-1),!0},cb_success:function(e){return!(!e.status||"SUCCESS"!=e.status)||(this.$message.error(e.msg),!1)},cb_showMess:function(e){return this.$message.success(e.msg),!0},gen_sameValue:function(e,t){return function(o,n,r){n!=e?r(new Error(t)):r()}},refreshCaptcha:function(e){e.preventDefault(),e.target.src=this.hysrvport+"/captcha?"+Math.random()},add_authToken:function(e){return e.length<1?"":e=e.indexOf("?")>-1?e+"&Authorization="+this.apiSrv.token:e+"?Authorization="+this.apiSrv.token},callServer:function(e,t,o){var n=this;this.apiSrv.callServer(e,t).then(function(e){if(console.log("res ------",e),o)for(var t=0;t<o.length;t++){if(o[t])if(!o[t](e))break}}).catch(function(e){console.log("err:",e),n.$message.error(e)})},callSrvAct:function(e,t){var o=this;return new i.a(function(n,r){o.apiSrv.callServer(e,t).then(function(e){e.status&&"SUCCESS"==e.status?n(e):(console.log("res:",e),o.$message.error(e.msg))}).catch(function(e){console.log("err:",e),o.$message.error(e)})})},gen_list_cb:function(e,t){var o=this;if(!e||e.length<1)return this.cb_null;var n=e+"Data",r=e+"TotalRec",a=e+"TotalPage",i=e+"RecOfPage",l=e+"CurPage";return function(e){return t&&1==t&&e.data.cp>1?o[n]=o[n].concat(e.data.pageData||[]):o[n]=e.data.pageData||[],o[r]=e.data.totalRec,o[i]=e.data.rop,o[l]=e.data.cp,o[a]=e.data.rop>0?Math.ceil(e.data.totalRec/e.data.rop):0,e.data.detailData&&(o[n+"dData"]=e.data.detailData||[]),!0}},gen_selmulti_change:function(e){var t=this;if(!e||e.length<1)return this.cb_null;var o=e+"MultiSel";return function(e){if(t[o]){for(var n=[],r=0;r<e.length;r++)n.push(e[r].id);t[o]=n}}},refreshPage2:function(e,t,o,n,a,i){var l=e+"QueryArr",s=e+"CbPage",c=JSON.parse(r()(this[l]));if(c&&c.length>0)for(var u=c.length-1;u>-1;u--)console.log("qpsArr[i].val",c[u].val,0==c[u].val,""!=c[u].val),0==c[u].val&&(console.log("i:",u),c.splice(u,1));console.log("qpsArr:",c,this[l]);var h={qps:c||"",rop:o,cp:n};return this[e+"SortParas"]&&(h.sps=this[e+"SortParas"]),h._hy=a,this.callServer(t,h,[this.cb_success,this[s],i])},refreshPage:function(e,t,o,n){var r=e+"RecOfPage",a=e+"CurPage";this[a]<1&&(this[a]=1),this.refreshPage2(e,t,this[r],this[a],o,n)},queryPageData:function(e,t,o,n,a,i){if(!e||e.length<1)return this.cb_null;var l=e+"QueryArr",s=JSON.parse(r()(this[l]));if(s&&s.length>0)for(var c=s.length-1;c>-1;c--)0==s[c].val&&s.splice(c,1);console.log("qpsArr:",s);var u={qps:s||[],rop:o,cp:n};return this[e+"SortParas"]&&(u.sps=this[e+"SortParas"]),u._hy=a,this.callServer(t,u,i)}}}}}]);