(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-1f50"],{ffaJ:function(e,t,n){"use strict";var r=n("gLNj");n.n(r).a},gLNj:function(e,t,n){},y2a5:function(e,t,n){"use strict";var r=n("gDS+"),a=n.n(r),o=n("4d7F"),s=n.n(o);t.a={methods:{cb_null:function(e){return!1},cb_goBack:function(e){return this.$router.go(-1),!0},cb_success:function(e){return!(!e.status||"SUCCESS"!=e.status)||(this.$message.error(e.msg),!1)},cb_showMess:function(e){return this.$message.success(e.msg),!0},gen_sameValue:function(e,t){return function(n,r,a){r!=e?a(new Error(t)):a()}},refreshCaptcha:function(e){e.preventDefault(),e.target.src=this.hysrvport+"/captcha?"+Math.random()},add_authToken:function(e){return e.length<1?"":e=e.indexOf("?")>-1?e+"&Authorization="+this.apiSrv.token:e+"?Authorization="+this.apiSrv.token},callServer:function(e,t,n){var r=this;this.apiSrv.callServer(e,t).then(function(e){if(console.log("res ------",e),n)for(var t=0;t<n.length;t++){if(!n[t](e))break}}).catch(function(e){console.log("err:",e),r.$message.error(e)})},callSrvAct:function(e,t){var n=this;return new s.a(function(r,a){n.apiSrv.callServer(e,t).then(function(e){e.status&&"SUCCESS"==e.status?r(e):(console.log("res:",e),n.$message.error(e.msg))}).catch(function(e){console.log("err:",e),n.$message.error(e)})})},gen_list_cb:function(e,t){var n=this;if(!e||e.length<1)return this.cb_null;var r=e+"Data",a=e+"TotalRec",o=e+"TotalPage",s=e+"RecOfPage",l=e+"CurPage";return function(e){return t&&1==t&&e.data.cp>1?n[r]=n[r].concat(e.data.pageData||[]):n[r]=e.data.pageData||[],n[a]=e.data.totalRec,n[s]=e.data.rop,n[l]=e.data.cp,n[o]=e.data.rop>0?Math.ceil(e.data.totalRec/e.data.rop):0,e.data.detailData&&(n[r+"dData"]=e.data.detailData||[]),!0}},gen_selmulti_change:function(e){var t=this;if(!e||e.length<1)return this.cb_null;var n=e+"MultiSel";return function(e){if(t[n]){for(var r=[],a=0;a<e.length;a++)r.push(e[a].id);t[n]=r}}},refreshPage2:function(e,t,n,r,o){var s=e+"QueryArr",l=e+"CbPage",i=JSON.parse(a()(this[s]));if(i&&i.length>0)for(var p=i.length-1;p>-1;p--)console.log("qpsArr[i].val",i[p].val,0==i[p].val,""!=i[p].val),0==i[p].val&&(console.log("i:",p),i.splice(p,1));console.log("qpsArr:",i,this[s]);var c={qps:i||"",rop:n,cp:r};return this[e+"SortParas"]&&(c.sps=this[e+"SortParas"]),c._hy=o,this.callServer(t,c,[this.cb_success,this[l]])},refreshPage:function(e,t,n){var r=e+"RecOfPage",a=e+"CurPage";this[a]<1&&(this[a]=1),this.refreshPage2(e,t,this[r],this[a],n)},queryPageData:function(e,t,n,r,o){if(!e||e.length<1)return this.cb_null;var s=e+"QueryArr",l=JSON.parse(a()(this[s]));if(l&&l.length>0)for(var i=l.length-1;i>-1;i--)0==l[i].val&&l.splice(i,1);console.log("qpsArr:",l);var p={qps:l||[],rop:n,cp:r};return this[e+"SortParas"]&&(p.sps=this[e+"SortParas"]),this.callServer(t,p,o)}}}},zMcA:function(e,t,n){"use strict";n.r(t);var r=n("P2sY"),a=n.n(r),o={name:"pmanagement",mixins:[n("y2a5").a],components:{},props:{paramsObj:{type:Object,default:function(){return{}}}},data:function(){return{newPersoneForm:{id:0,name:"",jobno:"",idnumber:""},personeForm:{},personData:[],personTotalRec:0,personTotalPage:0,personRecOfPage:10,personCurPage:1,personCbPage:this.gen_cb_page("person"),personQueryArr:[],personQueryInit:[],personMultiSel:[],personeQueryInit:[{name:"title",val:"",op:"like"}],personeQueryArr:[{name:"name",val:"",op:"like"},{name:"jobno",val:"",op:"like"},{name:"idnumber",val:"",op:"like"}],personeSortParas:[{name:"name",orderV:"asc"}],personeCbPage:this.gen_list_cb("persone"),personeData:[],personeTotalRec:0,personeTotalPage:0,personeRecOfPage:10,personeCurPage:1}},mounted:function(){console.log("初始化"),this.pObj=a()({},this.paramsObj),this.gcomm.mapLength(this.pObj)>0?(this.isInDialog=!0,this.personeForm=a()({},this.newPersoneForm,this.pObj)):this.personeForm=a()({},this.newPersoneForm,this.$route.params),this.refreshPage("persone","/actq","personlist"),console.log("数据",this.personeData)},methods:{pObjChanged:function(){this.gcomm.mapLength(this.pObj)>0&&(this.isInDialog=!0,this.personeForm=a()({},this.newPersoneForm,this.pObj))},personMultiSelChange:function(e){this.personMultiSel=e},personeSizeChange:function(e){this.refreshPage2("persone","/actq",e,this.personeCurPage,"personlist")},personeCurChange:function(e){this.refreshPage2("persone","/actq",this.personeRecOfPage,e,"personlist")},search:function(){this.personeQueryArr[0].val=this.personeForm.name,this.personeQueryArr[1].val=this.personeForm.jobno,this.personeQueryArr[2].val=this.personeForm.idnumber,this.refreshPage("persone","/actq","personlist")},add:function(){this.$router.push({name:"personedit"})}},watch:{paramsObj:function(e){this.pObj.id!=this.paramsObj.id&&(this.pObj=a()({},this.paramsObj),this.pObjChanged())}},computed:{},beforeCreate:function(){},created:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){}},s=(n("ffaJ"),n("KHd+")),l=Object(s.a)(o,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",{attrs:{direction:"horizontal"}},[n("el-aside",[n("div",{staticStyle:{display:"flex","justify-content":"space-around",width:"100%"}},[n("span",{staticStyle:{display:"block","font-size":"24px","font-weight":"800"}},[n("i",{staticClass:"el-icon-plus"})]),e._v(" "),n("span",{staticStyle:{display:"block","font-size":"24px","font-weight":"800"}},[n("i",{staticClass:"el-icon-edit"})]),e._v(" "),n("span",{staticStyle:{display:"block","font-size":"24px","font-weight":"800"}},[n("i",{staticClass:"el-icon-delete"})])]),e._v(" "),n("el-input",{attrs:{placeholder:"搜索部门名称"}}),e._v(" "),n("el-tree",{attrs:{props:{label:"label",disabled:!1,isLeaf:!0,children:"children"}}})],1),e._v(" "),n("el-main",[n("el-form",{attrs:{model:e.personeForm,"label-width":"80px"}},[n("el-row",[n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"姓名",prop:"name"}},[n("el-input",{model:{value:e.personeForm.name,callback:function(t){e.$set(e.personeForm,"name",t)},expression:"personeForm.name"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"工号",prop:"jobno"}},[n("el-input",{model:{value:e.personeForm.jobno,callback:function(t){e.$set(e.personeForm,"jobno",t)},expression:"personeForm.jobno"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"身份证号",prop:"idnumber"}},[n("el-input",{model:{value:e.personeForm.idnumber,callback:function(t){e.$set(e.personeForm,"idnumber",t)},expression:"personeForm.idnumber"}})],1)],1)],1)],1),e._v(" "),n("div",{staticStyle:{display:"flex"}},[n("el-button",{on:{click:function(t){e.search()}}},[n("span",[e._v("搜索\n                ")])]),e._v(" "),n("el-button",{attrs:{size:"mini"},on:{click:function(t){e.add()}}},[n("span",[e._v("新增\n                ")])]),e._v(" "),n("el-button",[n("span",[e._v("批量导入\n                ")])]),e._v(" "),n("el-button",[n("span",[e._v("批量删除\n                ")])])],1),e._v(" "),n("el-table",{ref:"person",attrs:{data:e.personeData,"default-sort":{order:"descending"}}},[n("el-table-column",{attrs:{label:"全选",type:"selection"}}),e._v(" "),n("el-table-column",{attrs:{label:"照片",prop:"image"}}),e._v(" "),n("el-table-column",{attrs:{label:"姓名",prop:"name"}}),e._v(" "),n("el-table-column",{attrs:{label:"岗位",prop:"post"}}),e._v(" "),n("el-table-column",{attrs:{label:"性别",prop:"gender"}}),e._v(" "),n("el-table-column",{attrs:{label:"身份证号",prop:"idnumber"}}),e._v(" "),n("el-table-column",{attrs:{label:"工号",prop:"jobno"}}),e._v(" "),n("el-table-column",{attrs:{label:"卡片数量",prop:"cardnum"}}),e._v(" "),n("el-table-column",{attrs:{label:"手机号",prop:"phone"}}),e._v(" "),n("el-table-column",{attrs:{label:"最近修改时间",prop:"updated"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(e.gcomm.v2datestr(t.row.uptime))+"\n                ")])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作"}})],1),e._v(" "),n("el-pagination",{attrs:{total:e.personeTotalRec,"page-count":e.personeTotalPage,layout:"total, sizes, prev, pager, next"},on:{"size-change":e.personeSizeChange,"current-change":e.personeCurChange}})],1)],1)},[],!1,null,"4c7e1c8e",null);l.options.__file="index.vue";t.default=l.exports}}]);