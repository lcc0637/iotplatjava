(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-1642","chunk-72dc"],{"/i82":function(t,e,o){"use strict";o.r(e);var n=o("P2sY"),i=o.n(n),a=o("gDS+"),r=o.n(a),s=o("y2a5"),c=o("m1lz"),l={name:"joblist",mixins:[s.a],components:{Jobedit:c.default},props:{},data:function(){return{jobData:[],jobTotalRec:0,jobTotalPage:0,jobRecOfPage:10,jobCurPage:1,jobCbPage:this.gen_list_cb("job"),jobQueryArr:[{name:"title",val:"",op:"like",tb:"job"}],jobQueryInit:[{name:"title",val:"",op:"like",tb:"job"}],jobSortParas:[{name:"title",tb:"job",orderV:"asc"}],jobEditShow:!1,jobInstEdit:null}},mounted:function(){this.refreshPage("job","/actq","joblist")},methods:{jobQuery:function(){this.refreshPage2("job","/actq",this.remoteRecOfPage,1,"joblist")},jobResetQuery:function(){this.jobQueryArr=JSON.parse(r()(this.jobQueryInit))},jobSizeChange:function(t){this.refreshPage2("job","/actq",t,this.jobCurPage,"joblist")},jobCurChange:function(t){this.refreshPage2("job","/actq",this.jobRecOfPage,t,"joblist")},handleJobRowEdit:function(t,e){this.jobInstEdit=i()({},e),this.jobEditShow=!0},handleJobRowDel:function(t,e){var o=this,n=e;this.$confirm("此操作将删除该项数, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t={_hy:"jobdel",job:[{name:"id",val:n.id,op:"="}]};console.log("upData:",t),o.callSrvAct("/act",t).then(function(t){o.refreshPage("job","/actq","joblist")})}).catch(function(t){o.$message.error(t)})},click46cac:function(){this.jobInstEdit={id:0,title:""},this.jobEditShow=!0},editJobSetOK:function(t,e){this.refreshPage("job","/actq","joblist"),this.jobInstEdit={},this.jobEditShow=!1},editJobSetClose:function(){this.jobEditShow=!1}},watch:{},computed:{},beforeCreate:function(){},created:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){}},u=(o("xuBk"),o("KHd+")),h=Object(u.a)(l,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-container",{attrs:{direction:"vertical"}},[o("el-container",{attrs:{direction:"horizontal"}},[o("span",{staticStyle:{height:"24px",display:"inline-block","margin-top":"12px"}},[t._v("岗位管理\n        ")]),t._v(" "),o("el-button",{staticClass:"header-func",on:{click:t.click46cac}},[o("svg-icon",{attrs:{"icon-class":"add",color:"#363535","font-size":"16px"}}),t._v(" "),o("span",[t._v("新增\n            ")])],1)],1),t._v(" "),o("el-table",{ref:"job",attrs:{data:t.jobData}},[o("el-table-column",{attrs:{label:"岗位名称",prop:"title"}}),t._v(" "),o("el-table-column",{attrs:{label:"排序号",prop:"sort"}}),t._v(" "),o("el-table-column",{attrs:{label:"备注",prop:"memo"}}),t._v(" "),o("el-table-column",{attrs:{prop:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{"native-type":""},on:{click:function(o){t.handleJobRowEdit(e.$index,e.row)}}},[o("span",[t._v("修改\n                    ")])]),t._v(" "),o("el-button",{on:{click:function(o){t.handleJobRowDel(e.$index,e.row)}}},[o("span",[t._v("删除\n                    ")])])]}}])})],1),t._v(" "),o("el-dialog",{attrs:{visible:t.jobEditShow,title:"职位编辑",width:"70%","append-to-body":!0,"destroy-on-close":!0},on:{"update:visible":function(e){t.jobEditShow=e}}},[o("jobedit",{attrs:{paramsObj:t.jobInstEdit},on:{submitOk:t.editJobSetOK,submitClose:t.editJobSetClose}})],1)],1)},[],!1,null,"965a6c20",null);h.options.__file="index.vue";e.default=h.exports},"9wpP":function(t,e,o){"use strict";var n=o("OWEQ");o.n(n).a},OWEQ:function(t,e,o){},aCt6:function(t,e,o){},m1lz:function(t,e,o){"use strict";o.r(e);var n=o("P2sY"),i=o.n(n),a={name:"jobedit",mixins:[o("y2a5").a],components:{},props:{paramsObj:{type:Object,default:function(){return{}}}},data:function(){return{newJobForm:{id:0,title:"",sort:0,memo:""},jobForm:{},isInDialog:!1,pObj:{}}},mounted:function(){this.pObj=i()({},this.paramsObj),this.gcomm.mapLength(this.pObj)>0?(this.isInDialog=!0,this.jobForm=i()({},this.newJobForm,this.pObj)):this.jobForm=i()({},this.newJobForm,this.$route.params)},methods:{pObjChanged:function(){this.gcomm.mapLength(this.pObj)>0&&(this.isInDialog=!0,this.jobForm=i()({},this.newJobForm,this.pObj))},handleClose:function(){this.isInDialog?this.$emit("submitClose"):this.$router.go(-1)},handleSubmitJob:function(){this.submitJobForm("jobForm")},submitJobFormImpl:function(t){var e=this,o=void 0,n=!0,a="";this[t].id>0?(o="/act",n=!1,a="jobup"):(o="/act",a="jobadd");var r=i()({},this[t]);r._hy=a,this.callSrvAct(o,r).then(function(t){console.log("res:",t,e.isInDialog),e.isInDialog?n?t.data&&t.data.inst?e.$emit("submitOk",t.data.inst):t.data&&e.$emit("submitOk",t.data||{}):e.$emit("submitOk",r):e.$router.go(-1)})},submitJobForm:function(t){var e=this;this.$refs[t].validate(function(o){if(!o)return!1;e.submitJobFormImpl(t)})}},watch:{paramsObj:function(t){this.pObj.id!=this.paramsObj.id&&(this.pObj=i()({},this.paramsObj),this.pObjChanged())}},computed:{},beforeCreate:function(){},created:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){}},r=(o("9wpP"),o("KHd+")),s=Object(r.a)(a,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-container",{attrs:{direction:"vertical"}},[t.isInDialog?t._e():o("el-container",{attrs:{direction:"horizontal"}},[o("span",{staticStyle:{height:"24px",display:"inline-block","margin-top":"12px"}},[t._v("岗位编辑\n        ")]),t._v(" "),o("el-button",{staticClass:"header-func",attrs:{type:"text"}},[o("svg-icon",{attrs:{"icon-class":"close","font-size":"16px"}})],1)],1),t._v(" "),o("el-form",{ref:"jobForm",attrs:{model:t.jobForm,"label-width":"120px"}},[o("el-form-item",{attrs:{label:"岗位名称",prop:"title",rules:{required:!0,message:"请输入岗位名称",min:1,max:255}}},[o("el-input",{model:{value:t.jobForm.title,callback:function(e){t.$set(t.jobForm,"title",e)},expression:"jobForm.title"}})],1),t._v(" "),t._e(),t._v(" "),t._e(),t._v(" "),o("el-row",{attrs:{type:"flex",justify:"center"}},[o("el-button",{on:{click:t.handleSubmitJob}},[o("span",[t._v("确定\n                    ")])]),t._v(" "),o("el-button",{on:{click:t.handleClose}},[o("span",[t._v("取消\n                    ")])])],1)],1)],1)},[],!1,null,"24129a65",null);s.options.__file="index.vue";e.default=s.exports},xuBk:function(t,e,o){"use strict";var n=o("aCt6");o.n(n).a},y2a5:function(t,e,o){"use strict";var n=o("gDS+"),i=o.n(n),a=o("4d7F"),r=o.n(a);e.a={methods:{cb_null:function(t){return!1},cb_goBack:function(t){return this.$router.go(-1),!0},cb_success:function(t){return!(!t.status||"SUCCESS"!=t.status)||(this.$message.error(t.msg),!1)},cb_showMess:function(t){return this.$message.success(t.msg),!0},gen_sameValue:function(t,e){return function(o,n,i){n!=t?i(new Error(e)):i()}},refreshCaptcha:function(t){t.preventDefault(),t.target.src=this.hysrvport+"/captcha?"+Math.random()},add_authToken:function(t){return t.length<1?"":t=t.indexOf("?")>-1?t+"&Authorization="+this.apiSrv.token:t+"?Authorization="+this.apiSrv.token},callServer:function(t,e,o){var n=this;this.apiSrv.callServer(t,e).then(function(t){if(console.log("res ------",t),o)for(var e=0;e<o.length;e++){if(o[e])if(!o[e](t))break}}).catch(function(t){console.log("err:",t),n.$message.error(t)})},callSrvAct:function(t,e){var o=this;return new r.a(function(n,i){o.apiSrv.callServer(t,e).then(function(t){t.status&&"SUCCESS"==t.status?n(t):(console.log("res:",t),o.$message.error(t.msg))}).catch(function(t){console.log("err:",t),o.$message.error(t)})})},gen_list_cb:function(t,e){var o=this;if(!t||t.length<1)return this.cb_null;var n=t+"Data",i=t+"TotalRec",a=t+"TotalPage",r=t+"RecOfPage",s=t+"CurPage";return function(t){return e&&1==e&&t.data.cp>1?o[n]=o[n].concat(t.data.pageData||[]):o[n]=t.data.pageData||[],o[i]=t.data.totalRec,o[r]=t.data.rop,o[s]=t.data.cp,o[a]=t.data.rop>0?Math.ceil(t.data.totalRec/t.data.rop):0,t.data.detailData&&(o[n+"dData"]=t.data.detailData||[]),!0}},gen_selmulti_change:function(t){var e=this;if(!t||t.length<1)return this.cb_null;var o=t+"MultiSel";return function(t){if(e[o]){for(var n=[],i=0;i<t.length;i++)n.push(t[i].id);e[o]=n}}},refreshPage2:function(t,e,o,n,a,r){var s=t+"QueryArr",c=t+"CbPage",l=JSON.parse(i()(this[s]));if(l&&l.length>0)for(var u=l.length-1;u>-1;u--)console.log("qpsArr[i].val",l[u].val,0==l[u].val,""!=l[u].val),0==l[u].val&&(console.log("i:",u),l.splice(u,1));console.log("qpsArr:",l,this[s]);var h={qps:l||"",rop:o,cp:n};return this[t+"SortParas"]&&(h.sps=this[t+"SortParas"]),h._hy=a,this.callServer(e,h,[this.cb_success,this[c],r])},refreshPage:function(t,e,o,n){var i=t+"RecOfPage",a=t+"CurPage";this[a]<1&&(this[a]=1),this.refreshPage2(t,e,this[i],this[a],o,n)},queryPageData:function(t,e,o,n,a,r){if(!t||t.length<1)return this.cb_null;var s=t+"QueryArr",c=JSON.parse(i()(this[s]));if(c&&c.length>0)for(var l=c.length-1;l>-1;l--)0==c[l].val&&c.splice(l,1);console.log("qpsArr:",c);var u={qps:c||[],rop:o,cp:n};return this[t+"SortParas"]&&(u.sps=this[t+"SortParas"]),u._hy=a,this.callServer(e,u,r)}}}}}]);