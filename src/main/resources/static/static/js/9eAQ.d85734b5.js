(window.webpackJsonp=window.webpackJsonp||[]).push([["9eAQ"],{"9eAQ":function(e,a,t){"use strict";t.r(a);var n={name:"roles",components:{},data:function(){return{parentData:this.$route.params,filterOneData:[{value:0,label:"全部"},{value:1,label:"已设置"},{value:2,label:"未设置"}],filterOneSel:0,filterName:"",tableData:[],totalRec:0,totalPage:0,recOfPage:10,curPage:1}},mounted:function(){this.$store.state.globaldata.jwtoken;this.getPageData({name:this.filterName,filterOneSel:this.filterOneSel,userId:this.parentData.id,recOfPage:this.recOfPage,curPage:this.curPage})},methods:{handlePrev:function(){this.$router.go(-1)},searchData:function(){this.getPageData({name:this.filterName,filterOneSel:this.filterOneSel,userId:this.parentData.id,recOfPage:this.recOfPage,curPage:this.curPage})},getPageData:function(e){var a=this;this.loading=!0,apiSrv.callServer("/listuserroles",e).then(function(e){a.loading=!1,e.status&&"SUCCESS"==e.status?e.data&&e.data.pageData&&(a.tableData=e.data.pageData,a.recOfPage=e.data.recOfPage,a.totalRec=e.data.totalRec,a.totalPage=e.data.totalPage,a.curPage=e.data.curPage):a.$message.error(e.data.msg)}).catch(function(e){a.$message.error(e),a.loading=!1})},handleSizeChange:function(e){this.getPageData({name:this.filterName,filterOneSel:this.filterOneSel,userId:this.parentData.id,recOfPage:e,curPage:this.curPage})},handleCurrentChange:function(e){this.getPageData({name:this.filterName,filterOneSel:this.filterOneSel,userId:this.parentData.id,recOfPage:this.recOfPage,curPage:e})},handleJoin:function(e,a){var t=this,n=this.tableData[e];apiSrv.callServer("/joinuserrole",{userId:this.parentData.id,roleId:n.id}).then(function(e){t.loading=!1,e.status&&"SUCCESS"==e.status?t.getPageData({name:t.filterName,filterOneSel:t.filterOneSel,userId:t.parentData.id,recOfPage:t.recOfPage,curPage:t.curPage}):t.$message.error(e.msg)}).catch(function(e){t.$message.error(e),t.loading=!1})},handleRemove:function(e,a){var t=this,n=this.tableData[e];this.loading=!0,apiSrv.callServer("/removeuserrole",{userId:this.parentData.id,roleId:n.id}).then(function(e){t.loading=!1,e.status&&"SUCCESS"==e.status?t.getPageData({name:t.filterName,filterOneSel:t.filterOneSel,userId:t.parentData.id,recOfPage:t.recOfPage,curPage:t.curPage}):t.$message.error(e.msg)}).catch(function(e){t.$message.error(e),t.loading=!1})}}},r=t("KHd+"),l=Object(r.a)(n,function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("div",{staticClass:"form-header form-header-back"},[t("span",[e._v(e._s(e.parentData.name)+"：")]),e._v(" "),t("el-button",{attrs:{plain:""},on:{click:function(a){e.handlePrev()}}},[t("svg-icon",{attrs:{"icon-class":"back"}}),e._v("\n      返回\n    ")],1),e._v(" "),t("el-button",{staticClass:"header-func ",attrs:{plain:""},on:{click:function(a){e.searchData()}}},[e._v("搜索")]),e._v(" "),t("el-input",{staticClass:"header-func widthinput",attrs:{placeholder:"请输入内容"},model:{value:e.filterName,callback:function(a){e.filterName=a},expression:"filterName"}}),e._v(" "),t("el-select",{staticClass:"header-func widthsel",attrs:{placeholder:"请选择"},model:{value:e.filterOneSel,callback:function(a){e.filterOneSel=a},expression:"filterOneSel"}},e._l(e.filterOneData,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),t("span",{staticClass:"header-func txttop"},[e._v("过滤条件：")])],1),e._v(" "),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"",border:""}},[t("el-table-column",{attrs:{prop:"name",label:"角色名称","min-width":"30%","show-overflow-tooltip":!0}}),e._v(" "),t("el-table-column",{attrs:{prop:"joinedDesc",label:"设置","min-width":"30%"}}),e._v(" "),t("el-table-column",{attrs:{label:"操作","min-width":"40%"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"mini",disabled:"已设置"==a.row.joinedDesc},on:{click:function(t){e.handleJoin(a.$index,a.row)}}},[e._v("加入")]),e._v(" "),t("el-button",{attrs:{size:"mini",type:"danger",disabled:"未设置"==a.row.joinedDesc},on:{click:function(t){e.handleRemove(a.$index,a.row)}}},[e._v("移出")])]}}])})],1),e._v(" "),t("div",{staticClass:"block paginationPadding"},[t("el-pagination",{attrs:{"current-page":e.curPage,"page-sizes":[10,20,30,40],"page-size":e.recOfPage,layout:"total, sizes, prev, pager, next",total:e.totalRec},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},[],!1,null,null,null);l.options.__file="index.vue";a.default=l.exports}}]);