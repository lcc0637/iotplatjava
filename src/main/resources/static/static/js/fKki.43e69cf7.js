(window.webpackJsonp=window.webpackJsonp||[]).push([["fKki"],{fKki:function(t,a,e){"use strict";e.r(a);var n=e("P2sY"),o=e.n(n),r={name:"roles",components:{},data:function(){return{newForm:{id:0,departId:"",birthday:"",sex:"女",mobile:"",caller:"",avatar:"",name:"",corpId:this.$store.state.globaldata.corp.id,jwtoken:"jwtonken xxx",userName:"",pwd:""},tableData:[],totalRec:0,totalPage:0,recOfPage:15,curPage:1}},mounted:function(){this.$store.state.globaldata.jwtoken;this.getPageData({name:"",recOfPage:this.recOfPage,curPage:this.curPage})},methods:{getPageData:function(t){var a=this;this.loading=!0,apiSrv.callServer("/listusersdeparts",t).then(function(t){a.loading=!1,t.status&&"SUCCESS"==t.status?t.data&&t.data.pageData&&t.data.pageData.length>0&&(a.tableData=t.data.pageData,a.recOfPage=t.data.recOfPage,a.totalRec=t.data.totalRec,a.totalPage=t.data.totalPage,a.curPage=t.data.curPage):a.$message.error(t.msg)}).catch(function(t){a.$message.error(t),a.loading=!1})},handleSizeChange:function(t){this.getPageData({name:"",recOfPage:t,curPage:this.curPage})},handleCurrentChange:function(t){this.getPageData({name:"",recOfPage:this.recOfPage,curPage:t})},handleSet:function(t,a){var e=this.tableData[t];this.$router.push({name:"accountrole",params:e})},handleDelete:function(t,a){var e=this,n=this.tableData[t];this.$confirm("此操作将删除该项数, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=[n.id];apiSrv.callServer("/deluser",{ids:t}).then(function(t){e.loading=!1,t.status&&"SUCCESS"==t.status?e.getPageData({name:"",recOfPage:e.recOfPage,curPage:e.curPage}):e.$message.error(t.msg)}).catch(function(t){e.$message.error(t),e.loading=!1})}).catch(function(){})},handleNew:function(){var t=o()({},this.newForm);this.$router.push({name:"accountedit",params:t})},handleEdit:function(t,a){var e=o()({},this.tableData[t]);this.$router.push({name:"accountedit",params:e})}}},i=e("KHd+"),l=Object(i.a)(r,function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"form-header form-header-back"},[e("el-button",{attrs:{plain:""},on:{click:function(a){t.handleNew()}}},[e("svg-icon",{staticClass:"icon",attrs:{"icon-class":"add"}}),t._v(" "),e("div",{staticClass:"divDele"}),t._v(" "),e("span",{staticClass:"border-left"},[t._v("新增")])],1)],1),t._v(" "),e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:"",border:""}},[e("el-table-column",{attrs:{prop:"name",label:"用户姓名","min-width":"15%","show-overflow-tooltip":!0}}),t._v(" "),e("el-table-column",{attrs:{prop:"departName",label:"所属部门","min-width":"20%","show-overflow-tooltip":!0}}),t._v(" "),e("el-table-column",{attrs:{prop:"userName",label:"用户账号","min-width":"10%","show-overflow-tooltip":!0}}),t._v(" "),e("el-table-column",{attrs:{prop:"birthday",label:"出生日期","min-width":"10%","show-overflow-tooltip":!0}}),t._v(" "),e("el-table-column",{attrs:{prop:"sex",label:"性别","min-width":"5%","show-overflow-tooltip":!0}}),t._v(" "),e("el-table-column",{attrs:{label:"操作","min-width":"40%"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{size:"mini"},on:{click:function(e){t.handleSet(a.$index,a.row)}}},[t._v("用户角色")]),t._v(" "),e("el-button",{attrs:{size:"mini"},on:{click:function(e){t.handleEdit(a.$index,a.row)}}},[t._v("编辑")]),t._v(" "),e("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){t.handleDelete(a.$index,a.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),e("div",{staticClass:"block paginationPadding"},[e("el-pagination",{attrs:{"current-page":t.curPage,"page-sizes":[15,30,45,60],"page-size":t.recOfPage,layout:"total, sizes, prev, pager, next",total:t.totalRec},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},[],!1,null,null,null);l.options.__file="index.vue";a.default=l.exports}}]);