(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2123"],{VZk3:function(t,e,a){"use strict";a.r(e);var s=a("P2sY"),r=a.n(s),n={name:"startcamera",mixins:[a("y2a5").a],components:{},props:{paramsObj:{type:Object,default:function(){return{}}}},data:function(){return{pObj:{},success:!1,fail:!1,startuptext:"",progress:0,barcolor:"",barstate:""}},mounted:function(){this.pObj=r()({},this.paramsObj),console.log("传过来的",this.pObj),"运行中"==this.pObj.state&&(this.startuptext="启动完成",this.$refs.bar.percentage=100),this.startup()},methods:{startup:function(){var t=this,e=this,a={_hy:"cameraopen",qps:[{name:"id",val:[this.pObj.id],op:"in"}]};console.log("upData:",a),this.callSrvAct("/deviceopen",a).then(function(a){console.log("后台返回值",a),"SUCCESS"==a.data[0].result?(t.count("SUCCESS",a.data),e.success=!0,e.fail=!1,e.barcolor="green",t.$emit("submitOk")):"FAILD"==a.data[0].result&&(t.count("FAILD",a.data),e.success=!0,e.fail=!0,e.barcolor="red")})},count:function(t,e){var a=this,s=this;s.progress=0,this.interval=window.setInterval(function(){s.progress+=40,s.startuptext="启动中",s.progress>=100&&(s.progress=100,window.clearInterval(s.interval),console.log(t),"SUCCESS"==t?(s.barstate="success",s.startuptext="启动完成",a.$emit("submitClose",{progress:s.progress,barstate:s.barstate,barcolor:s.barcolor,status:t})):"FAILD"==t&&(s.barstate="exception",s.startuptext="启动失败",a.$emit("submitClose",{progress:s.progress,barstate:s.barstate,barcolor:s.barcolor,status:t,msg:e[0].msg})))},500)},colse:function(){this.$emit("submitClose",{})}},watch:{},computed:{},beforeCreate:function(){},created:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){window.clearInterval(this.interval)},destroyed:function(){}},i=(a("ikIs"),a("KHd+")),o=Object(i.a)(n,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",{attrs:{direction:"vertical"}},[a("el-main",[a("div",{staticStyle:{margin:"10px 0px"}},[a("span",{staticStyle:{"font-size":"20px","font-wieght":"800"}},[t._v("开启进度\n            ")])]),t._v(" "),a("div",{staticStyle:{display:"flex"}},[a("span",[t._v("摄像机接入：\n            ")]),t._v(" "),a("el-progress",{staticStyle:{width:"200px"},attrs:{percentage:t.progress,status:t.barstate,color:t.barcolor}}),t._v(" "),a("span",{class:{active1:t.success,active2:t.fail}},[t._v(t._s(t.startuptext)+"\n            ")])],1),t._v(" "),a("div",{staticStyle:{margin:"10px 0px"}},[a("span",{staticStyle:{"font-size":"20px","font-wieght":"800"}},[t._v("摄像机信息\n            ")])]),t._v(" "),a("div",{staticStyle:{display:"flex"}},[a("div",[a("span",[t._v("场景：\n                ")]),t._v(" "),a("span",[t._v(t._s(t.pObj.scene)+"\n                ")])]),t._v(" "),a("div",{staticStyle:{"margin-left":"200px"}},[a("span",[t._v("位置：\n                ")]),t._v(" "),a("span",[t._v(t._s(t.pObj.pos)+"\n                ")])])]),t._v(" "),a("div",{staticStyle:{display:"flex"}},[a("div",[a("span",[t._v("分辨率及帧率：\n                ")]),t._v(" "),a("span",[t._v(t._s(t.pObj.resolution+" "+t.pObj.framerate)+"\n                ")])]),t._v(" "),a("div",{staticStyle:{"margin-left":"200px"}},[a("span",[t._v("视频编码：\n                ")]),t._v(" "),a("span",[t._v(t._s(t.pObj.codec)+"\n                ")])])]),t._v(" "),a("div",[a("span",[t._v("视频地址：\n            ")]),t._v(" "),a("span",[t._v(t._s(t.pObj.videoa)+"\n            ")])]),t._v(" "),a("div",{staticStyle:{"text-align":"right"}},[t._e(),t._v(" "),a("el-button",{on:{click:t.colse}},[a("span",[t._v("关闭\n                ")])])],1)])],1)},[],!1,null,"6a5fcee0",null);o.options.__file="index.vue";e.default=o.exports},ikIs:function(t,e,a){"use strict";var s=a("sshD");a.n(s).a},sshD:function(t,e,a){},y2a5:function(t,e,a){"use strict";var s=a("gDS+"),r=a.n(s),n=a("4d7F"),i=a.n(n);e.a={methods:{cb_null:function(t){return!1},cb_goBack:function(t){return this.$router.go(-1),!0},cb_success:function(t){return!(!t.status||"SUCCESS"!=t.status)||(this.$message.error(t.msg),!1)},cb_showMess:function(t){return this.$message.success(t.msg),!0},gen_sameValue:function(t,e){return function(a,s,r){s!=t?r(new Error(e)):r()}},refreshCaptcha:function(t){t.preventDefault(),t.target.src=this.hysrvport+"/captcha?"+Math.random()},add_authToken:function(t){return t.length<1?"":t=t.indexOf("?")>-1?t+"&Authorization="+this.apiSrv.token:t+"?Authorization="+this.apiSrv.token},callServer:function(t,e,a){var s=this;this.apiSrv.callServer(t,e).then(function(t){if(console.log("res ------",t),a)for(var e=0;e<a.length;e++){if(a[e])if(!a[e](t))break}}).catch(function(t){console.log("err:",t),s.$message.error(t)})},callSrvAct:function(t,e){var a=this;return new i.a(function(s,r){a.apiSrv.callServer(t,e).then(function(t){t.status&&"SUCCESS"==t.status?s(t):(console.log("res:",t),a.$message.error(t.msg))}).catch(function(t){console.log("err:",t),a.$message.error(t)})})},gen_list_cb:function(t,e){var a=this;if(!t||t.length<1)return this.cb_null;var s=t+"Data",r=t+"TotalRec",n=t+"TotalPage",i=t+"RecOfPage",o=t+"CurPage";return function(t){return e&&1==e&&t.data.cp>1?a[s]=a[s].concat(t.data.pageData||[]):a[s]=t.data.pageData||[],a[r]=t.data.totalRec,a[i]=t.data.rop,a[o]=t.data.cp,a[n]=t.data.rop>0?Math.ceil(t.data.totalRec/t.data.rop):0,t.data.detailData&&(a[s+"dData"]=t.data.detailData||[]),!0}},gen_selmulti_change:function(t){var e=this;if(!t||t.length<1)return this.cb_null;var a=t+"MultiSel";return function(t){if(e[a]){for(var s=[],r=0;r<t.length;r++)s.push(t[r].id);e[a]=s}}},refreshPage2:function(t,e,a,s,n,i){var o=t+"QueryArr",c=t+"CbPage",l=JSON.parse(r()(this[o]));if(l&&l.length>0)for(var u=l.length-1;u>-1;u--)console.log("qpsArr[i].val",l[u].val,0==l[u].val,""!=l[u].val),0==l[u].val&&(console.log("i:",u),l.splice(u,1));console.log("qpsArr:",l,this[o]);var p={qps:l||"",rop:a,cp:s};return this[t+"SortParas"]&&(p.sps=this[t+"SortParas"]),p._hy=n,this.callServer(e,p,[this.cb_success,this[c],i])},refreshPage:function(t,e,a,s){var r=t+"RecOfPage",n=t+"CurPage";this[n]<1&&(this[n]=1),this.refreshPage2(t,e,this[r],this[n],a,s)},queryPageData:function(t,e,a,s,n,i){if(!t||t.length<1)return this.cb_null;var o=t+"QueryArr",c=JSON.parse(r()(this[o]));if(c&&c.length>0)for(var l=c.length-1;l>-1;l--)0==c[l].val&&c.splice(l,1);console.log("qpsArr:",c);var u={qps:c||[],rop:a,cp:s};return this[t+"SortParas"]&&(u.sps=this[t+"SortParas"]),u._hy=n,this.callServer(e,u,i)}}}}}]);