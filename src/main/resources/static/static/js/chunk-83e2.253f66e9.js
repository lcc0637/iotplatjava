(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-83e2"],{IYiU:function(e,t,r){},M2Gm:function(e,t,r){"use strict";r.r(t);var a=r("P2sY"),o=r.n(a),i=r("YEIV"),n=r.n(i),l={name:"cameraedit",mixins:[r("y2a5").a],components:{},props:{paramsObj:{type:Object,default:function(){return{}}}},data:function(){var e;return e={newCameraForm:{id:0,title:"",region_title:0,url:"",resolution:"",framerate:"",codec:"",videoa:"",corp:"",pos:"",scene:"",state:"",algorithms:""},cameraForm:{}},n()(e,"newCameraForm",{id:0,title:"",region_title:0,url:"",resolution:"",framerate:"",codec:"",videoa:"",corp:"",pos:"",scene:"",state:"",algorithms:"",planview:""}),n()(e,"cameraForm",{}),n()(e,"regionArr",[]),n()(e,"pObj",{}),n()(e,"pmst",[{lable:0,value:"平面视图"},{lable:1,value:"立体视图"}]),e},mounted:function(){this.pObj=o()({},this.paramsObj),this.gcomm.mapLength(this.pObj)>0?(this.isInDialog=!0,this.cameraForm=o()({},this.newCameraForm,this.pObj)):this.cameraForm=o()({},this.newCameraForm,this.$route.params);var e=this;this.callSrvAct("/actq",{_hy:"regiontt",qps:[{name:"title",val:"",op:"like"}],sps:[{name:"title",orderV:"asc"}]}).then(function(t){var r=t.data||[];console.log("获取到的数据",r),e.regionArr=r})},methods:{pObjChanged:function(){this.gcomm.mapLength(this.pObj)>0&&(this.isInDialog=!0,this.cameraForm=o()({},this.newCameraForm,this.pObj))},handleChange:function(e){console.log(e);for(var t=0;t<this.regionArr.length;t++)this.regionArr[t].title==e&&(this.cameraForm.region_id=this.regionArr[t].id)},handleAvatarSuccess:function(e,t){this.cameraForm.url=e.data},genDownUrl:function(e){if(!e||e.length<1)return"";var t=e.split(";");return!t||t.length<2?"":this.hysrvport+"/hydownload?btnEncode=headupload&relateType=camera&filename="+t[1]+"&Authorization="+this.apiSrv.token},genUploadUrl:function(e){return this.hysrvport+"/hyupload?btnEncode=headupload&relateType=camera&fi=add&Authorization="+this.apiSrv.token},handleClick:function(){console.log("数据",this.cameraForm),this.submitOrgForm("cameraForm")},submitOrgFormImpl:function(e){var t=this,r=void 0,a=!0,i="";this[e].id>0?(r="/act",a=!1,i="cameraup"):(r="/act",i="cameraadd",this[e].state="关闭");var n=o()({},this[e]);n._hy=i,this.callSrvAct(r,n).then(function(e){t.isInDialog?(console.log("不跳转"),a?e.data&&e.data.inst?(console.log("1111111111"),t.$emit("submitOk",e.data.inst)):e.data&&(console.log("22222222222"),t.$emit("submitOk",e.data||{})):t.$emit("submitOk",n)):(console.log("跳转"),t.$router.go(-1))})},submitOrgForm:function(e){var t=this;this.$refs[e].validate(function(r){if(!r)return!1;t.submitOrgFormImpl(e)})},close:function(){this.cameraForm.url="",this.$refs.box.clearFiles()},goClick:function(){this.$emit("submitClose")}},watch:{paramsObj:function(e){this.pObj.id!=this.paramsObj.id&&(this.pObj=o()({},this.paramsObj),this.pObjChanged())}},computed:{},beforeCreate:function(){},created:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){}},s=(r("ltjX"),r("KHd+")),c=Object(s.a)(l,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-container",{attrs:{direction:"vertical"}},[r("el-form",{ref:"cameraForm",attrs:{model:e.cameraForm,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"设备名称：",prop:"title",rules:{required:!0,trigger:"input"}}},[r("el-input",{attrs:{placeholder:"请输入设备名称"},model:{value:e.cameraForm.title,callback:function(t){e.$set(e.cameraForm,"title",t)},expression:"cameraForm.title"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"摄像机位置：",prop:""}},[r("div",[r("el-select",{attrs:{placeholder:"选择区域"},on:{change:e.handleChange},model:{value:e.cameraForm.region_title,callback:function(t){e.$set(e.cameraForm,"region_title",t)},expression:"cameraForm.region_title"}},e._l(e.regionArr,function(e,t){return r("el-option",{key:e.id,attrs:{label:e.title,value:e.title}})})),e._v(" "),r("el-select",{staticStyle:{"margin-left":"20px"},attrs:{placeholder:"平面视图"},model:{value:e.cameraForm.planview,callback:function(t){e.$set(e.cameraForm,"planview",t)},expression:"cameraForm.planview"}},e._l(e.pmst,function(e,t){return r("el-option",{key:e.lable,attrs:{label:e.value,value:e.value}})}))],1)]),e._v(" "),r("el-form-item",{attrs:{prop:"url"}},[r("el-upload",{ref:"box",staticStyle:{border:"1px solid #d9d9d9","border-radius":"6px",cursor:"pointer",position:"relative",overflow:"hidden",width:"100%",height:"178px","line-height":"178px","text-align":"center"},attrs:{action:e.genUploadUrl(),multiple:!1,"on-success":e.handleAvatarSuccess,limit:0,id:"box"}},[e.cameraForm.url?r("img",{staticStyle:{"object-fit":"fill"},attrs:{src:e.genDownUrl(e.cameraForm.url)}}):r("svg-icon",{staticStyle:{"font-size":"28px",color:"#8c939d"},attrs:{"icon-class":"add"}}),e._v(" "),e.cameraForm.url?r("span",{ref:"clos",staticStyle:{position:"absolute",top:"0px",right:"0px"},attrs:{id:"clos"}},[r("i",{staticClass:"el-icon-close",staticStyle:{position:"absolute",top:"0px",right:"0px"},on:{click:function(t){return t.stopPropagation(),e.close(t)}}})]):e._e()],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"分辨率：",prop:"resolution"}},[r("el-input",{attrs:{placeholder:"请输入帧率"},model:{value:e.cameraForm.resolution,callback:function(t){e.$set(e.cameraForm,"resolution",t)},expression:"cameraForm.resolution"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"帧率：",prop:"framerate"}},[r("el-input",{attrs:{placeholder:"请输入帧率"},model:{value:e.cameraForm.framerate,callback:function(t){e.$set(e.cameraForm,"framerate",t)},expression:"cameraForm.framerate"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"视频编码：",prop:"codec"}},[r("el-input",{attrs:{placeholder:"请输入视频编码"},model:{value:e.cameraForm.codec,callback:function(t){e.$set(e.cameraForm,"codec",t)},expression:"cameraForm.codec"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"视频地址：",prop:"videoa",rules:{required:!0,trigger:"input"}}},[r("el-input",{attrs:{placeholder:"请输入视频地址"},model:{value:e.cameraForm.videoa,callback:function(t){e.$set(e.cameraForm,"videoa",t)},expression:"cameraForm.videoa"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"厂商：",prop:"corp",rules:{required:!0,trigger:"input"}}},[r("el-input",{model:{value:e.cameraForm.corp,callback:function(t){e.$set(e.cameraForm,"corp",t)},expression:"cameraForm.corp"}})],1),e._v(" "),e._e(),e._v(" "),e._e(),e._v(" "),e._e(),e._v(" "),e._e()],1),e._v(" "),r("el-row",{staticStyle:{"text-align":"center"},attrs:{autogenchild:!1,childcol:24,justify:"center"}},[r("el-button",{on:{click:e.goClick}},[r("span",[e._v("取消\n            ")])]),e._v(" "),r("el-button",{on:{click:e.handleClick}},[r("span",[e._v("确定\n            ")])])],1)],1)},[],!1,null,"46e94a36",null);c.options.__file="index.vue";t.default=c.exports},"RU/L":function(e,t,r){r("Rqdy");var a=r("WEpk").Object;e.exports=function(e,t,r){return a.defineProperty(e,t,r)}},Rqdy:function(e,t,r){var a=r("Y7ZC");a(a.S+a.F*!r("jmDH"),"Object",{defineProperty:r("2faE").f})},SEkw:function(e,t,r){e.exports={default:r("RU/L"),__esModule:!0}},YEIV:function(e,t,r){"use strict";t.__esModule=!0;var a=function(e){return e&&e.__esModule?e:{default:e}}(r("SEkw"));t.default=function(e,t,r){return t in e?(0,a.default)(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},ltjX:function(e,t,r){"use strict";var a=r("IYiU");r.n(a).a},y2a5:function(e,t,r){"use strict";var a=r("gDS+"),o=r.n(a),i=r("4d7F"),n=r.n(i);t.a={methods:{cb_null:function(e){return!1},cb_goBack:function(e){return this.$router.go(-1),!0},cb_success:function(e){return!(!e.status||"SUCCESS"!=e.status)||(this.$message.error(e.msg),!1)},cb_showMess:function(e){return this.$message.success(e.msg),!0},gen_sameValue:function(e,t){return function(r,a,o){a!=e?o(new Error(t)):o()}},refreshCaptcha:function(e){e.preventDefault(),e.target.src=this.hysrvport+"/captcha?"+Math.random()},add_authToken:function(e){return e.length<1?"":e=e.indexOf("?")>-1?e+"&Authorization="+this.apiSrv.token:e+"?Authorization="+this.apiSrv.token},callServer:function(e,t,r){var a=this;this.apiSrv.callServer(e,t).then(function(e){if(console.log("res ------",e),r)for(var t=0;t<r.length;t++){if(r[t])if(!r[t](e))break}}).catch(function(e){console.log("err:",e),a.$message.error(e)})},callSrvAct:function(e,t){var r=this;return new n.a(function(a,o){r.apiSrv.callServer(e,t).then(function(e){e.status&&"SUCCESS"==e.status?a(e):(console.log("res:",e),r.$message.error(e.msg))}).catch(function(e){console.log("err:",e),r.$message.error(e)})})},gen_list_cb:function(e,t){var r=this;if(!e||e.length<1)return this.cb_null;var a=e+"Data",o=e+"TotalRec",i=e+"TotalPage",n=e+"RecOfPage",l=e+"CurPage";return function(e){return t&&1==t&&e.data.cp>1?r[a]=r[a].concat(e.data.pageData||[]):r[a]=e.data.pageData||[],r[o]=e.data.totalRec,r[n]=e.data.rop,r[l]=e.data.cp,r[i]=e.data.rop>0?Math.ceil(e.data.totalRec/e.data.rop):0,e.data.detailData&&(r[a+"dData"]=e.data.detailData||[]),!0}},gen_selmulti_change:function(e){var t=this;if(!e||e.length<1)return this.cb_null;var r=e+"MultiSel";return function(e){if(t[r]){for(var a=[],o=0;o<e.length;o++)a.push(e[o].id);t[r]=a}}},refreshPage2:function(e,t,r,a,i,n){var l=e+"QueryArr",s=e+"CbPage",c=JSON.parse(o()(this[l]));if(c&&c.length>0)for(var u=c.length-1;u>-1;u--)console.log("qpsArr[i].val",c[u].val,0==c[u].val,""!=c[u].val),0==c[u].val&&(console.log("i:",u),c.splice(u,1));console.log("qpsArr:",c,this[l]);var m={qps:c||"",rop:r,cp:a};return this[e+"SortParas"]&&(m.sps=this[e+"SortParas"]),m._hy=i,this.callServer(t,m,[this.cb_success,this[s],n])},refreshPage:function(e,t,r,a){var o=e+"RecOfPage",i=e+"CurPage";this[i]<1&&(this[i]=1),this.refreshPage2(e,t,this[o],this[i],r,a)},queryPageData:function(e,t,r,a,i,n){if(!e||e.length<1)return this.cb_null;var l=e+"QueryArr",s=JSON.parse(o()(this[l]));if(s&&s.length>0)for(var c=s.length-1;c>-1;c--)0==s[c].val&&s.splice(c,1);console.log("qpsArr:",s);var u={qps:s||[],rop:r,cp:a};return this[e+"SortParas"]&&(u.sps=this[e+"SortParas"]),u._hy=i,this.callServer(t,u,n)}}}}}]);